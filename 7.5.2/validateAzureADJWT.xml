<entityStoreData xmlns="http://www.vordel.com/2005/06/24/entityStore">
<metaInfo flags="138">
	<exportRoots>
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
					</key>
				</key>
			</key>
		</key>
		<key type='ESConfiguration'>
			<id field='name' value='Entity Store Configuration'/>
		</key>
	</exportRoots>
	<typeVersions>
		<type name="AttributeCompare" version="1"/>
		<type name="AttributeExtractHTTPHeaderFilter" version="0"/>
		<type name="CacheAttributeFilter" version="1"/>
		<type name="ChangeMessageFilter" version="0"/>
		<type name="CircuitContainer" version="1"/>
		<type name="CompareAttributeFilter" version="0"/>
		<type name="ConnectToURLFilter" version="4"/>
		<type name="ConnectionFilter" version="17"/>
		<type name="ConversionFilter" version="0"/>
		<type name="CreateMessageKeyFilter" version="1"/>
		<type name="ESConfiguration" version="21"/>
		<type name="Entity" version="0"/>
		<type name="FalseFilter" version="0"/>
		<type name="Filter" version="5"/>
		<type name="FilterCircuit" version="4"/>
		<type name="IsCachedAttributeFilter" version="1"/>
		<type name="JSONPath" version="1"/>
		<type name="JSONPathFilter" version="0"/>
		<type name="JSONRemoveNodeFilter" version="2"/>
		<type name="JWTVerifyFilter" version="0"/>
		<type name="JavaScriptFilter" version="3"/>
		<type name="QuoteOftheDayFilter" version="0"/>
		<type name="RestoreContentBodyFromAttributeFilter" version="1"/>
		<type name="RootChild" version="0"/>
		<type name="SaveToFileFilter" version="2"/>
		<type name="SetAttributeFilter" version="0"/>
		<type name="StoreContentBodyToAttributeFilter" version="0"/>
		<type name="StringReplaceFilter" version="2"/>
		<type name="TrueFilter" version="0"/>
	</typeVersions>
	<realizedTypes><![CDATA[
<entityStoreData>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Entity" name="RootChild"/>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="RootChild" name="ESConfiguration">
        <constant name="_version" type="integer" value="21"/>
        <!--
            Give this singleton a key.
        -->
        <field isKey="true" name="name" type="string"/>
        <!-- 
            We use this field to verify that the passphrase for the 
            encryped data is synchronized between the server and client, and
            between multiple invocations of the client
        -->
        <field name="passphraseTest" type="encrypted"/>
        <field name="version" type="string"/>
        <!-- The product key should never change for the lifetime of the product -->
        <field name="productKey" type="string"/>
        <field cardinality="?" name="gitrev" type="string"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="RootChild" name="CircuitContainer">
    <constant name="_version" type="integer" value="1"/>
    <componentType cardinality="*" name="FilterCircuit"/>
    <componentType cardinality="*" name="CircuitContainer"/>
    <componentType cardinality="*" name="MVProperty"/>
    <field isKey="true" name="name" type="string"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="RootChild" name="FilterCircuit">
        <constant name="_version" type="integer" value="4"/>
		<componentType cardinality="*" name="Filter"/>
		<componentType cardinality="1" name="BoundCircuit"/>
		<componentType cardinality="*" name="Property"/>
		<field cardinality="1" name="start" type="@Filter"/>
		<field cardinality="?" name="fault" type="@Filter"/>
		<field isKey="true" name="name" type="string"/>
		<field cardinality="1" default="3" name="logMask" type="integer"/>

		<field cardinality="?" name="description" type="string"/>		
		<field cardinality="1" name="category" type="@PolicyCategory">
            <defaultRef>
                <key type="PolicyCategoryGroup">
                  <id field="name" value="Policy Categories"/>
                  <key type="PolicyCategory">
                      <id field="name" value="miscellaneous"/>
                  </key>
                </key>
            </defaultRef>
        </field>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="false" extends="Entity" name="AttributeCompare">
      <constant name="_version" type="integer" value="1"/>
      <field isKey="true" name="attrName" type="string"/>
      <field default="CONTAINS" isKey="true" name="matchType" type="string"/>
      <field isKey="true" name="expression" type="string"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="false" extends="Entity" name="JSONPath">
        <constant name="_version" type="integer" value="1"/>
        <field name="attributeName" type="string"/>
        <field isKey="true" name="expression" type="string"/>
        <field default="java.util.List" name="unmarshalType" type="string"/>
        <field default="false" name="failOnError" type="boolean"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Entity" name="Filter">
        <constant name="_version" type="integer" value="5"/>
        <field cardinality="?" name="successNode" type="@Filter"/>
        <field cardinality="?" name="failureNode" type="@Filter"/>
        <field isKey="true" name="name" type="string"/>
        <field cardinality="1" default="2" name="logMask" type="integer"/>
        <field cardinality="1" default="Filter aborted due to exception" name="logFatal" type="string"/>
        <field cardinality="1" default="Filter failed" name="logFailure" type="string"/>
        <field cardinality="1" default="Filter passed" name="logSuccess" type="string"/>
        <field cardinality="1" name="category" type="@Category">
            <defaultRef>
                <key type="CategoryGroup">
                  <id field="name" value="Filter Categories"/>
                  <key type="Category">
                      <id field="name" value="miscellaneous"/>
                  </key>
                </key>
            </defaultRef>
        </field>
      <field cardinality="1" default="0" name="abortProcessingOnLogError" type="boolean"/>
      <field cardinality="1" default="SERVICE" name="logMaskType" type="string"/>
      <field cardinality="*" name="classloader" type="^ClassLoader"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="SetAttributeFilter">
        <constant name="_version" type="integer" value="0"/>
  
    <!-- Name of the Filter class that encapsulates this configuration entity -->
    <constant name="class" type="string" value="com.vordel.circuit.attribute.SetAttributeFilter"/>
    
    <!-- List of the configuration parameters, their types, and their default values -->
    <field cardinality="1" default="" name="messageAttribute" type="string"/>	
    <field cardinality="1" default="" name="attributeValue" type="string"/>	
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="StoreContentBodyToAttributeFilter">
          <constant name="_version" type="integer" value="0"/>
		  <constant name="class" type="string" value="com.vordel.circuit.body.StoreContentBodyToAttributeFilter"/>
		  <field cardinality="1" default="store.content.body" name="attributeToUse" type="string"/>	
        </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="RestoreContentBodyFromAttributeFilter">
          <constant name="_version" type="integer" value="1"/>
		  <constant name="class" type="string" value="com.vordel.circuit.body.RestoreContentBodyFromAttributeFilter"/>
		  <field cardinality="1" default="${store.content.body}" name="attributeToUse" type="string"/>	
        </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="SaveToFileFilter">
		<constant name="_version" type="integer" value="2"/>
		<constant name="class" type="string" value="com.vordel.circuit.file.SaveToFileFilter"/>
		<field cardinality="1" default="${id}.out" name="fileName" type="string"/>
		<field cardinality="1" default="${environment.VINSTDIR}/message-archive" name="directory" type="string"/>
		<field cardinality="1" default="1000" name="maxFileSize" type="integer"/>
		<field cardinality="1" default="500" name="maxNumberFiles" type="integer"/>
		<field cardinality="1" default="0" name="includeHeaders" type="boolean"/>
		<field cardinality="1" default="0" name="includeRequestLine" type="boolean"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="StringReplaceFilter">
    <constant name="_version" type="integer" value="2"/>
    <constant name="class" type="string" value="com.vordel.circuit.string.StringReplaceFilter"/>
    
    <field cardinality="1" default="" name="sourceAttribute" type="string"/>
    <field cardinality="1" default="" name="destAttribute" type="string"/>
    <field cardinality="1" default="false" name="destAttributeOverride" type="boolean"/>
	<field cardinality="1" default="" name="replacementString" type="string"/>
    
	<field cardinality="1" default="STRAIGHT_REPLACE" name="matchMode" type="string"/>
		
    <field cardinality="1" default="" name="straightMatchString" type="string"/>
	<field cardinality="1" default="" name="regexMatchString" type="string"/>	

	<field cardinality="1" default="MATCH_FIRST" name="matchBehaviour" type="string"/>
    
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="QuoteOftheDayFilter">
        <constant name="_version" type="integer" value="0"/>
		<constant name="class" type="string" value="com.vordel.circuit.demo.QuoteOftheDayFilter"/>
		<field cardinality="1" default="" name="quotes" type="string"/>	
         </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="CacheAttributeFilter">
        <constant name="_version" type="integer" value="1"/>	    
	    <constant name="class" type="string" value="com.vordel.circuit.cache.CacheAttributeFilter"/>
        <field cardinality="1" name="cacheToUse" type="^Cache"/>
	    <field cardinality="1" default="message.key" name="keyAttributeName" type="string"/>
		<field cardinality="1" default="content.body" name="attributeName" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="IsCachedAttributeFilter">
        <constant name="_version" type="integer" value="1"/>	    
	    <constant name="class" type="string" value="com.vordel.circuit.cache.IsCachedAttributeFilter"/>
        <field cardinality="1" name="cacheToUse" type="^Cache"/>
	    <field cardinality="1" default="message.key" name="keyAttributeName" type="string"/>
		<field cardinality="1" default="content.body" name="attributeName" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="JSONRemoveNodeFilter">
        <constant name="_version" type="integer" value="2"/>
        <constant name="class" type="string" value="com.vordel.circuit.json.JSONRemoveNodeFilter"/>
        <field cardinality="*" name="node" type="string"/>
        <field cardinality="1" name="failOnError" type="boolean"/>
        <field cardinality="1" name="savedDeletedNodes" type="boolean"/> 
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="TrueFilter">
        <constant name="_version" type="integer" value="0"/>
		<constant name="class" type="string" value="com.vordel.circuit.basic.True"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="CreateMessageKeyFilter">
        <constant name="_version" type="integer" value="1"/>	    
	    <constant name="class" type="string" value="com.vordel.circuit.cache.CreateMessageKeyFilter"/>
	    <field cardinality="1" default="content.body" name="uniqueAttributeName" type="string"/>
	    <field cardinality="1" default="message.key" name="outputAttributeName" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Filter" name="ConversionFilter">
        <constant name="_version" type="integer" value="0"/>
		<field cardinality="?" name="outputContentType" type="string"/> 
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="ConversionFilter" name="ChangeMessageFilter">
        <constant name="_version" type="integer" value="0"/>
		<constant name="class" type="string" value="com.vordel.circuit.conversion.ChangeMessageFilter"/>
		<field cardinality="1" default="" name="body" type="string"/>	
         </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="AttributeExtractHTTPHeaderFilter">
        <constant name="_version" type="integer" value="0"/>
    <constant name="class" type="string" value="com.vordel.circuit.attribute.AttributeExtractHTTPHeaderFilter"/>
    <field cardinality="1" name="headerName" type="string"/>
    <field cardinality="1" name="attributeName" type="string"/>
    <field cardinality="1" default="0" name="base64Decode" type="boolean"/>
    <field cardinality="1" default="0" name="useQueryParameter" type="boolean"/>
    <!-- Override the category to give it a different default -->
    <field cardinality="1" name="category" type="@Category">
      <defaultRef>
        <key type="CategoryGroup">
          <id field="name" value="Filter Categories"/>
          <key type="Category">
            <id field="name" value="attribute"/>
          </key>
        </key>
      </defaultRef>
    </field>    
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="JavaScriptFilter">
        <constant name="_version" type="integer" value="3"/>
	<constant name="class" type="string" value="com.vordel.circuit.script.ScriptFilter"/>
	<field cardinality="1" default="function invoke(msg)         {            return true;         }" name="script" type="string"/>
	<field cardinality="1" default="nashorn" name="engineName" type="string"/>
        <field cardinality="*" name="requiredProperties" type="string"/>
        <field cardinality="*" name="generatedProperties" type="string"/>
        <field cardinality="*" name="consumedProperties" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="CompareAttributeFilter">
        <constant name="_version" type="integer" value="0"/>
        <constant name="class" type="string" value="com.vordel.circuit.attribute.CompareAttributeFilter"/>
        <componentType name="AttributeCompare"/>
        <field default="MATCH_ALL" name="matchingRule" type="string"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="ConnectionFilter">
    <constant name="_version" type="integer" value="17"/>
    <constant name="class" type="string" value="com.vordel.circuit.net.ConnectionFilter"/>
    <componentType cardinality="1" name="SaveToFileFilter"/>
    <field cardinality="?" name="profile" type="^NamedAuthnProfile"/>

    <!-- SSL Specific -->
    <field cardinality="*" name="caCerts" type="^Certificate"/>
    <field cardinality="*" name="sslUsers" type="^Certificate"/>
    <field cardinality="1" default="true" name="useRootCerts" type="boolean"/>
    <field default="FIPS:!SSLv3:!aNULL" name="ciphers" type="string"/> <!-- See OpenSSL "ciphers" manpage -->
    <!-- set of tokens for advanced SSL options: nosslv2, nosslv3, etc. -->
    <field cardinality="*" name="ssloptions" type="string">
        <defaultValue>nosslv2</defaultValue>
        <defaultValue>nosslv3</defaultValue>
        <defaultValue>notlsv1</defaultValue>
        <defaultValue>notlsv1_1</defaultValue>
    </field>

    <field cardinality="?" default="0" name="sendProxyMode" type="boolean"/>	
    <field cardinality="?" default="0" name="forwardClientHostHeader" type="boolean"/>


    <field cardinality="1" default="false" name="transparentProxy" type="boolean"/>
    <field cardinality="1" default="false" name="sendReceivedContentHeaders" type="boolean"/>
    <field cardinality="1" default="true" name="handleRedirects" type="boolean"/>
    <field cardinality="1" default="false" name="performRetries" type="boolean"/>
    <field cardinality="*" name="retryHTTPRanges" type="^HTTPStatusClass"/>
    <field cardinality="1" default="5" name="retryCount" type="string"/>
    <field cardinality="1" default="500" name="retryLatency" type="string"/>
    <field cardinality="1" default="false" name="slaBreachAsFailure" type="boolean"/>
    <field cardinality="1" default="false" name="saveTransactionOnFailure" type="boolean"/>
    <field cardinality="1" default="false" name="runPolicyOnConnectionFailure" type="boolean"/>
    <field cardinality="?" name="connectionFailurePolicy" type="^FilterCircuit"/>
    <field cardinality="?" name="proxyServer" type="^ProxyServer"/>
    <field cardinality="?" default="0" name="stickyness" type="integer"/>
    <field cardinality="?" default="unnamed" name="stickyCookieName" type="string"/>
    <field cardinality="?" default="600000" name="stickyCookieExpiry" type="long"/>
    <field cardinality="?" default="" name="stickyCookiePath" type="string"/>
    <field cardinality="?" default="" name="stickyCookieDomain" type="string"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="ConnectionFilter" name="ConnectToURLFilter">
        <constant name="_version" type="integer" value="4"/>
		<constant name="class" type="string" value="com.vordel.circuit.net.ConnectToURLFilter"/>
		<field cardinality="1" default="${http.request.uri}" name="url" type="string"/>	
		<field cardinality="1" default="${http.request.verb}" name="method" type="string"/>	
		<field cardinality="1" default="${content.body}" name="body" type="string"/>	
		<field cardinality="1" default="${http.headers}" name="protoHeaders" type="string"/>	
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="JSONPathFilter">
        <constant name="_version" type="integer" value="0"/>
        <constant name="class" type="string" value="com.vordel.circuit.json.JSONPathFilter"/>
        <componentType name="JSONPath"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="JWTVerifyFilter">
    <constant name="_version" type="integer" value="0"/>
    <constant name="class" type="string" value="com.vordel.circuit.jwt.JWTVerifyFilter"/>
	<field default="${payload}" name="jwsToken" type="string"/>
	
	<field cardinality="1" default="0" name="publicKeyLocation" type="integer"/>
	<field cardinality="1" name="publicKeyAlias" type="^Certificate"/>
    <field default="${certificate}" name="publicKeyMsgAttribute" type="string"/>
	
	<field cardinality="1" default="0" name="sharedKeySelection" type="integer"/>
	<field cardinality="1" name="sharedKey" type="encrypted"/>
	<field cardinality="1" default="${symmetric.key}" name="sharedKeyInMsgAttr" type="string"/>
	<field default="${jwk}" name="jwkKey" type="string"/>
	
	 </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="FalseFilter">
        <constant name="_version" type="integer" value="0"/>
		<constant name="class" type="string" value="com.vordel.circuit.basic.False"/>
	</entityType>
</entityStoreData>
	]]></realizedTypes>
</metaInfo>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="FilterCircuit">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
			</key>
		</key>
	</key>
	<fval name="category"><value contentType="reference">
		<key type='PolicyCategoryGroup'>
			<id field='name' value='Policy Categories'/>
			<key type='PolicyCategory'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="description"><value></value></fval>
	<fval name="logMask"><value>3</value></fval>
	<fval name="name"><value>ValidateAzureADJwtToken</value></fval>
	<fval name="start"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='TrueFilter'>
							<id field='name' value='START'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${data.decoded}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Set the attribute value</value></fval>
	<fval name="messageAttribute"><value>request.jwt.header</value></fval>
	<fval name="name"><value>Set Attribute Filter - request.jwt.header</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='ChangeMessageFilter'>
							<id field='name' value='Set Message - cast to json body'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>accessdenied</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Set the attribute value</value></fval>
	<fval name="messageAttribute"><value>error.code</value></fval>
	<fval name="name"><value>Set Attribute Filter - access denied</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${jwt.body}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Set the attribute value</value></fval>
	<fval name="messageAttribute"><value>request.jwt.body</value></fval>
	<fval name="name"><value>Set Attribute Filter - request.jwt.body</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='RestoreContentBodyFromAttributeFilter'>
							<id field='name' value='Restore Message - original.content.body'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TrueFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value></value></fval>
	<fval name="logFatal"><value>True filter error. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>True filter passed</value></fval>
	<fval name="name"><value>OK</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="QuoteOftheDayFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Quote of the day service failed</value></fval>
	<fval name="logFatal"><value>Error in quote of the day filter. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Success in quote of the day service</value></fval>
	<fval name="name"><value>README</value></fval>
	<fval name="quotes"><value>validates a provided JWT token with azureAD</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='TrueFilter'>
							<id field='name' value='START'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TrueFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value></value></fval>
	<fval name="logFatal"><value>True filter error. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>True filter passed</value></fval>
	<fval name="name"><value>START</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='AttributeExtractHTTPHeaderFilter'>
							<id field='name' value='Retrieve from HTTP header - jwt token'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPathFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>JSON Path - extract request.jwt.kid</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='CreateMessageKeyFilter'>
							<id field='name' value='Create Key - request.jwt.kid'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPath">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='JSONPathFilter'>
						<id field='name' value='JSON Path - extract request.jwt.kid'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="attributeName"><value>request.jwt.kid</value></fval>
	<fval name="expression"><value>$.kid</value></fval>
	<fval name="failOnError"><value>0</value></fval>
	<fval name="unmarshalType"><value>java.lang.String</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ConnectToURLFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="body"><value>${content.body}</value></fval>
	<fval name="caCerts"></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="ciphers"><value>DEFAULT</value></fval>
	<fval name="connectionFailurePolicy"><value contentType="reference">-1</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="forwardClientHostHeader"><value>0</value></fval>
	<fval name="handleRedirects"><value>1</value></fval>
	<fval name="logFailure"><value>Failed to route request to endpoint.</value></fval>
	<fval name="logFatal"><value>Error occurred while routing request to endpoint. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Successfully routed request to endpoint</value></fval>
	<fval name="method"><value>GET</value></fval>
	<fval name="name"><value>Connect to URL - get azure certificates</value></fval>
	<fval name="performRetries"><value>0</value></fval>
	<fval name="profile"><value contentType="reference">-1</value></fval>
	<fval name="protoHeaders"><value>${http.headers}</value></fval>
	<fval name="proxyServer"><value contentType="reference">-1</value></fval>
	<fval name="retryCount"><value>5</value></fval>
	<fval name="retryHTTPRanges"><value contentType="reference">-1</value></fval>
	<fval name="retryLatency"><value>500</value></fval>
	<fval name="runPolicyOnConnectionFailure"><value>0</value></fval>
	<fval name="saveTransactionOnFailure"><value>0</value></fval>
	<fval name="sendProxyMode"><value>0</value></fval>
	<fval name="sendReceivedContentHeaders"><value>0</value></fval>
	<fval name="slaBreachAsFailure"><value>0</value></fval>
	<fval name="sslUsers"><value contentType="reference">-1</value></fval>
	<fval name="ssloptions"></fval>
	<fval name="stickyCookieDomain"><value></value></fval>
	<fval name="stickyCookieExpiry"><value>600000</value></fval>
	<fval name="stickyCookieName"><value>unnamed</value></fval>
	<fval name="stickyCookiePath"><value></value></fval>
	<fval name="stickyness"><value>0</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='JSONRemoveNodeFilter'>
							<id field='name' value='JSON Remove Node - remove unused keys'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="transparentProxy"><value>0</value></fval>
	<fval name="url"><value>${http.azure.uri}</value></fval>
	<fval name="useRootCerts"><value>1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SaveToFileFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='ConnectToURLFilter'>
						<id field='name' value='Connect to URL - get azure certificates'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="directory"><value>${environment.VINSTDIR}/message-archive</value></fval>
	<fval name="fileName"><value>${id}.out</value></fval>
	<fval name="includeHeaders"><value>0</value></fval>
	<fval name="includeRequestLine"><value>0</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="maxFileSize"><value>1000</value></fval>
	<fval name="maxNumberFiles"><value>500</value></fval>
	<fval name="name"><value>Persistence Details</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="FalseFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>False filter error. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value></value></fval>
	<fval name="name"><value>NOK</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JWTVerifyFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='SetAttributeFilter'>
							<id field='name' value='Set Attribute Filter - access denied'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="jwkKey"><value>${request.jwk}</value></fval>
	<fval name="jwsToken"><value>${request.jwt}</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>JWT Verify</value></fval>
	<fval name="publicKeyAlias"><value contentType="reference">-1</value></fval>
	<fval name="publicKeyLocation"><value>0</value></fval>
	<fval name="publicKeyMsgAttribute"><value></value></fval>
	<fval name="sharedKey"><value></value></fval>
	<fval name="sharedKeyInMsgAttr"><value></value></fval>
	<fval name="sharedKeySelection"><value>0</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='SetAttributeFilter'>
							<id field='name' value='Set Attribute Filter - request.jwt.body'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CreateMessageKeyFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failure during creationo of message key from attribute.</value></fval>
	<fval name="logFatal"><value>Error during message creation of message key from attribute. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Message key created from attribute.</value></fval>
	<fval name="name"><value>Create Key - request.jwt.kid</value></fval>
	<fval name="outputAttributeName"><value>message.jwt.key</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='IsCachedAttributeFilter'>
							<id field='name' value='Is cached? - request.jwk'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="uniqueAttributeName"><value>request.jwt.kid</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${request.jwt.header.encoded}===</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Set the attribute value</value></fval>
	<fval name="messageAttribute"><value>data.base64</value></fval>
	<fval name="name"><value>Set Attribute Filter - data.base64</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='JavaScriptFilter'>
							<id field='name' value='Scripting Language - decode jwt header'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONRemoveNodeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failOnError"><value>0</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>JSON Remove Node - remove unused keys</value></fval>
	<fval name="node"><value>$.keys[?(@.kid!=&apos;${request.jwt.kid}&apos;)]</value></fval>
	<fval name="savedDeletedNodes"><value>0</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='JSONPathFilter'>
							<id field='name' value='JSON Path - extract certificate variables'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="RestoreContentBodyFromAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeToUse"><value>${original.content.body}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to restore the message</value></fval>
	<fval name="logFatal"><value>Error in restoring the message. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Success in restoring the message</value></fval>
	<fval name="name"><value>Restore Message - original.content.body</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='TrueFilter'>
							<id field='name' value='OK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ConnectToURLFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="body"><value>${content.body}</value></fval>
	<fval name="caCerts"></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="ciphers"><value>DEFAULT</value></fval>
	<fval name="connectionFailurePolicy"><value contentType="reference">-1</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="forwardClientHostHeader"><value>0</value></fval>
	<fval name="handleRedirects"><value>1</value></fval>
	<fval name="logFailure"><value>Failed to route request to endpoint.</value></fval>
	<fval name="logFatal"><value>Error occurred while routing request to endpoint. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Successfully routed request to endpoint</value></fval>
	<fval name="method"><value>GET</value></fval>
	<fval name="name"><value>Connect to URL - get azure certificate location</value></fval>
	<fval name="performRetries"><value>0</value></fval>
	<fval name="profile"><value contentType="reference">-1</value></fval>
	<fval name="protoHeaders"><value>${http.headers}</value></fval>
	<fval name="proxyServer"><value contentType="reference">-1</value></fval>
	<fval name="retryCount"><value>5</value></fval>
	<fval name="retryHTTPRanges"><value contentType="reference">-1</value></fval>
	<fval name="retryLatency"><value>500</value></fval>
	<fval name="runPolicyOnConnectionFailure"><value>0</value></fval>
	<fval name="saveTransactionOnFailure"><value>0</value></fval>
	<fval name="sendProxyMode"><value>0</value></fval>
	<fval name="sendReceivedContentHeaders"><value>0</value></fval>
	<fval name="slaBreachAsFailure"><value>0</value></fval>
	<fval name="sslUsers"><value contentType="reference">-1</value></fval>
	<fval name="ssloptions"></fval>
	<fval name="stickyCookieDomain"><value></value></fval>
	<fval name="stickyCookieExpiry"><value>600000</value></fval>
	<fval name="stickyCookieName"><value>unnamed</value></fval>
	<fval name="stickyCookiePath"><value></value></fval>
	<fval name="stickyness"><value>0</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='JSONPathFilter'>
							<id field='name' value='JSON Path - get azure certificate url'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="transparentProxy"><value>0</value></fval>
	<fval name="url"><value>https://login.microsoftonline.com/common/.well-known/openid-configuration</value></fval>
	<fval name="useRootCerts"><value>1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SaveToFileFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='ConnectToURLFilter'>
						<id field='name' value='Connect to URL - get azure certificate location'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="directory"><value>${environment.VINSTDIR}/message-archive</value></fval>
	<fval name="fileName"><value>${id}.out</value></fval>
	<fval name="includeHeaders"><value>0</value></fval>
	<fval name="includeRequestLine"><value>0</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="maxFileSize"><value>1000</value></fval>
	<fval name="maxNumberFiles"><value>500</value></fval>
	<fval name="name"><value>Persistence Details</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CacheAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeName"><value>request.jwk</value></fval>
	<fval name="cacheToUse"><value contentType="reference">
<key type='CacheManager'><id field='name' value='Cache Manager'/><key type='Cache'><id field='name' value='kps_security_validateazureadjwttoken'/></key></key>	</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="keyAttributeName"><value>message.jwt.key</value></fval>
	<fval name="logFailure"><value>Failed to cache the message attribute.</value></fval>
	<fval name="logFatal"><value>Error while caching the message attribute. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Cached the message attribute.</value></fval>
	<fval name="name"><value>Cache attribute - request.jwk</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='JWTVerifyFilter'>
							<id field='name' value='JWT Verify'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="StringReplaceFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="destAttribute"><value></value></fval>
	<fval name="destAttributeOverride"><value>0</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="matchBehaviour"><value>MATCH_FIRST</value></fval>
	<fval name="matchMode"><value>STRAIGHT_REPLACE</value></fval>
	<fval name="name"><value>String Replace - remove jwt padding</value></fval>
	<fval name="regexMatchString"><value>^([^\s]+ +)</value></fval>
	<fval name="replacementString"><value></value></fval>
	<fval name="sourceAttribute"><value>request.jwt</value></fval>
	<fval name="straightMatchString"><value>Bearer </value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='StringReplaceFilter'>
							<id field='name' value='String Replace - extract request.jwt.header.encoded'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JavaScriptFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="consumedProperties"></fval>
	<fval name="engineName"><value>jython</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="generatedProperties"><value>data.decoded</value></fval>
	<fval name="logFailure"><value>Failed script filter</value></fval>
	<fval name="logFatal"><value>Error while attempt to run script filter. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Passed script filter</value></fval>
	<fval name="name"><value>Scripting Language - decode jwt header</value></fval>
	<fval name="requiredProperties"><value>data.base64</value></fval>
	<fval name="script"><value>from com.vordel.common.base64 import Decoder&#xD;&#xA;&#xD;&#xA;def invoke(msg): &#xD;&#xA;    base64EncodedData = msg.get(&quot;data.base64&quot;);&#xD;&#xA;    if base64EncodedData != None:&#xD;&#xA;        dataDecoded = Decoder.decodeToString(base64EncodedData);&#xD;&#xA;        msg.put(&quot;data.decoded&quot;, dataDecoded );&#xD;&#xA;    return True       &#xD;&#xA;</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='SetAttributeFilter'>
							<id field='name' value='Set Attribute Filter - request.jwt.header'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="StoreContentBodyToAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeToUse"><value>original.content.body</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to store the message in attribute</value></fval>
	<fval name="logFatal"><value>Error in storing the message. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Success in storing the message to attribute </value></fval>
	<fval name="name"><value>Store Message - original.content.body</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='CompareAttributeFilter'>
							<id field='name' value='Compare Attribute - check request.jwt'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CompareAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed partner.port value is not empty</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>Filter passed partner.port value is not empty</value></fval>
	<fval name="matchingRule"><value>MATCH_ALL</value></fval>
	<fval name="name"><value>Compare Attribute - check request.jwt</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='StringReplaceFilter'>
							<id field='name' value='String Replace - remove jwt padding'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="AttributeCompare">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='CompareAttributeFilter'>
						<id field='name' value='Compare Attribute - check request.jwt'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="attrName"><value>request.jwt</value></fval>
	<fval name="expression"><value>^\s*$</value></fval>
	<fval name="matchType"><value>DOES_NOT_MATCH</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="AttributeExtractHTTPHeaderFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeName"><value>request.jwt</value></fval>
	<fval name="base64Decode"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='attribute'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="headerName"><value>Authorization</value></fval>
	<fval name="logFailure"><value>Failed to extract attribute HTTP header</value></fval>
	<fval name="logFatal"><value>Error occurred while extracting attributes from HTTP header. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>Extracted attribute from HTTP header</value></fval>
	<fval name="name"><value>Retrieve from HTTP header - jwt token</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='StoreContentBodyToAttributeFilter'>
							<id field='name' value='Store Message - original.content.body'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="useQueryParameter"><value>0</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="IsCachedAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeName"><value>request.jwk</value></fval>
	<fval name="cacheToUse"><value contentType="reference">
<key type='CacheManager'><id field='name' value='Cache Manager'/><key type='Cache'><id field='name' value='kps_security_validateazureadjwttoken'/></key></key>	</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='ConnectToURLFilter'>
							<id field='name' value='Connect to URL - get azure certificate location'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="keyAttributeName"><value>message.jwt.key</value></fval>
	<fval name="logFailure"><value></value></fval>
	<fval name="logFatal"><value>Error while looking for key in the  message attribiute cache. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>Found the key in the message attribute cache.</value></fval>
	<fval name="name"><value>Is cached? - request.jwk</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='JWTVerifyFilter'>
							<id field='name' value='JWT Verify'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPathFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>JSON Path - extract certificate variables</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='SetAttributeFilter'>
							<id field='name' value='Set Attribute Filter - request.jwk'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPath">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='JSONPathFilter'>
						<id field='name' value='JSON Path - extract certificate variables'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="attributeName"><value>request.jwt.certificate.x5t</value></fval>
	<fval name="expression"><value>$.keys[0].x5t</value></fval>
	<fval name="failOnError"><value>0</value></fval>
	<fval name="unmarshalType"><value>java.lang.String</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPath">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='JSONPathFilter'>
						<id field='name' value='JSON Path - extract certificate variables'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="attributeName"><value>request.jwt.certificate.kid</value></fval>
	<fval name="expression"><value>$.keys[0].kid</value></fval>
	<fval name="failOnError"><value>0</value></fval>
	<fval name="unmarshalType"><value>java.lang.String</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPath">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='JSONPathFilter'>
						<id field='name' value='JSON Path - extract certificate variables'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="attributeName"><value>request.jwt.certificate.kty</value></fval>
	<fval name="expression"><value>$.keys[0].kty</value></fval>
	<fval name="failOnError"><value>0</value></fval>
	<fval name="unmarshalType"><value>java.lang.String</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPath">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='JSONPathFilter'>
						<id field='name' value='JSON Path - extract certificate variables'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="attributeName"><value>request.jwt.certificate.x5c</value></fval>
	<fval name="expression"><value>$.keys[0].x5c[0]</value></fval>
	<fval name="failOnError"><value>0</value></fval>
	<fval name="unmarshalType"><value>java.lang.String</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPath">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='JSONPathFilter'>
						<id field='name' value='JSON Path - extract certificate variables'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="attributeName"><value>request.jwt.certificate.n</value></fval>
	<fval name="expression"><value>$.keys[0].n</value></fval>
	<fval name="failOnError"><value>0</value></fval>
	<fval name="unmarshalType"><value>java.lang.String</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPath">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='JSONPathFilter'>
						<id field='name' value='JSON Path - extract certificate variables'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="attributeName"><value>request.jwt.certificate.e</value></fval>
	<fval name="expression"><value>$.keys[0].e</value></fval>
	<fval name="failOnError"><value>0</value></fval>
	<fval name="unmarshalType"><value>java.lang.String</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPath">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='JSONPathFilter'>
						<id field='name' value='JSON Path - extract certificate variables'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="attributeName"><value>request.jwt.certificate.use</value></fval>
	<fval name="expression"><value>$.keys[0].use</value></fval>
	<fval name="failOnError"><value>0</value></fval>
	<fval name="unmarshalType"><value>java.lang.String</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPathFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>JSON Path - get azure certificate url</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='ConnectToURLFilter'>
							<id field='name' value='Connect to URL - get azure certificates'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JSONPath">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
					<key type='JSONPathFilter'>
						<id field='name' value='JSON Path - get azure certificate url'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="attributeName"><value>http.azure.uri</value></fval>
	<fval name="expression"><value>$.jwks_uri</value></fval>
	<fval name="failOnError"><value>0</value></fval>
	<fval name="unmarshalType"><value>java.lang.String</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>{&quot;kty&quot;: &quot;${request.jwt.certificate.kty}&quot;,&#xD;&#xA;&quot;use&quot;: &quot;${request.jwt.certificate.use}&quot;,&#xD;&#xA;&quot;kid&quot;: &quot;${request.jwt.certificate.kid}&quot;,&#xD;&#xA;&quot;x5t&quot;: &quot;${request.jwt.certificate.x5t}&quot;,&#xD;&#xA;&quot;n&quot;: &quot;${request.jwt.certificate.n}&quot;,&#xD;&#xA;&quot;e&quot;: &quot;${request.jwt.certificate.e}&quot;,&#xD;&#xA;&quot;x5c&quot;: [&quot;${request.jwt.certificate.x5c}&quot;]&#xD;&#xA;}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Set the attribute value</value></fval>
	<fval name="messageAttribute"><value>request.jwk</value></fval>
	<fval name="name"><value>Set Attribute Filter - request.jwk</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='CacheAttributeFilter'>
							<id field='name' value='Cache attribute - request.jwk'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ChangeMessageFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="body"><value>${request.jwt.header}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed in setting the message</value></fval>
	<fval name="logFatal"><value>Error in setting the message. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Success in setting the message</value></fval>
	<fval name="name"><value>Set Message - cast to json body</value></fval>
	<fval name="outputContentType"><value>application/json</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='JSONPathFilter'>
							<id field='name' value='JSON Path - extract request.jwt.kid'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="StringReplaceFilter">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
			<key type='CircuitContainer'>
				<id field='name' value='SecurityTypes'/>
				<key type='FilterCircuit'>
					<id field='name' value='ValidateAzureADJwtToken'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="destAttribute"><value>request.jwt.header.encoded</value></fval>
	<fval name="destAttributeOverride"><value>1</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='FalseFilter'>
							<id field='name' value='NOK'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="matchBehaviour"><value>MATCH_FIRST</value></fval>
	<fval name="matchMode"><value>REGEX_REPLACE</value></fval>
	<fval name="name"><value>String Replace - extract request.jwt.header.encoded</value></fval>
	<fval name="regexMatchString"><value>[.].*$</value></fval>
	<fval name="replacementString"><value></value></fval>
	<fval name="sourceAttribute"><value>request.jwt</value></fval>
	<fval name="straightMatchString"><value></value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='_common'/>
			<key type='CircuitContainer'>
				<id field='name' value='requestPolicy'/>
				<key type='CircuitContainer'>
					<id field='name' value='SecurityTypes'/>
					<key type='FilterCircuit'>
						<id field='name' value='ValidateAzureADJwtToken'/>
						<key type='SetAttributeFilter'>
							<id field='name' value='Set Attribute Filter - data.base64'/>
						</key>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CircuitContainer">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
		<key type='CircuitContainer'>
			<id field='name' value='requestPolicy'/>
		</key>
	</key>
	<fval name="name"><value>SecurityTypes</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CircuitContainer">
	<key type='CircuitContainer'>
		<id field='name' value='_common'/>
	</key>
	<fval name="name"><value>requestPolicy</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CircuitContainer">
	<fval name="name"><value>_common</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ESConfiguration">
	<fval name="name"><value>Entity Store Configuration</value></fval>
	<fval name="passphraseTest"><value>aHR0cDsvL3d3dy52b3JkZWwuY29t</value></fval>
	<fval name="productKey"><value>VordelGateway</value></fval>
	<fval name="version"><value>7.5.3</value></fval>
</entity>
</entityStoreData>